(function(e,c){typeof exports=="object"&&typeof module<"u"?module.exports=c(require("vue")):typeof define=="function"&&define.amd?define(["vue"],c):(e=typeof globalThis<"u"?globalThis:e||self,e.UnifiedapiVuejsDirectory=c(e.Vue))})(this,function(e){"use strict";const c="https://api.unified.to",d="https://api-eu.unified.to",h=e.defineComponent({name:"IntegrationsDirectory",props:{workspace_id:{type:String,required:!0},categories:Array,external_xref:String,state:String,scopes:Array,success_redirect:String,failure_redirect:String,nostyle:Boolean,environment:String,lang:String,notabs:Boolean,nocategories:Boolean,dc:String},watch:{async workspaceId(){await this.setup()},async"categories.length"(){await this.setup()},async environment(){await this.setup()},async lang(){await this.setup()},async"scopes.length"(){await this.setup()},async state(){await this.setup()},async external_xref(){await this.setup()}},data(){return{API_URL:this.dc==="eu"?d:c,INTEGRATIONS:[],selectedCategory:void 0,CATEGORIES:[],CATEGORY_MAP:{crm:"CRM",martech:"Marketing",ticketing:"Ticketing",uc:"Unified Communications",enrich:"Enrichment",ats:"ATS",storage:"Storage",accounting:"Accounting",hris:"HR",commerce:"Commerce",payment:"Payment",genai:"GenAI"}}},methods:{filter(t){return(t==null?void 0:t.filter(n=>!this.selectedCategory||n.categories.includes(this.selectedCategory)))||[]},unified_get_auth_url(t){var i;let n=`${this.API_URL}/unified/integration/auth/${this.workspace_id}/${t.type}?redirect=1`;return this.external_xref&&(n+=`&external_xref=${encodeURIComponent(this.external_xref)}`),this.state&&(n+=`&state=${encodeURIComponent(this.state)}`),(i=this.scopes)!=null&&i.length&&(n+=`&scopes=${encodeURIComponent(this.scopes.join(","))}`),this.environment&&this.environment!=="Production"&&(n+=`&env=${encodeURIComponent(this.environment)}`),this.lang&&(n+=`&lang=${this.lang}`),n+=`&success_redirect=${encodeURIComponent(this.success_redirect||window.location.href)}`,n+=`&failure_redirect=${encodeURIComponent(this.failure_redirect||window.location.href)}`,n},unified_select_category(t){this.selectedCategory=t},async load_data(t){try{return(await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}})).json()}catch{return}},async setup(){var n;this.selectedCategory=void 0;const t=`${this.API_URL}/unified/integration/workspace/${this.workspace_id}?summary=1${(n=this.categories)!=null&&n.length?"&categories="+this.categories.join(","):""}${this.environment==="Production"||!this.environment?"":"&env="+encodeURIComponent(this.environment)}`;if(this.INTEGRATIONS=await this.load_data(t)||[],this.CATEGORIES=[],this.INTEGRATIONS.forEach(i=>{var o;(o=i.categories)==null||o.forEach(a=>{var l;this.CATEGORY_MAP[a]&&(!((l=this.categories)!=null&&l.length)||this.categories.includes(a))&&this.CATEGORIES.push(a)})}),this.CATEGORIES=[...new Set(this.CATEGORIES)],this.CATEGORIES.length===1?this.CATEGORIES=[]:this.CATEGORIES=this.CATEGORIES.sort(function(i,o){return i.localeCompare(o)}),!this.nostyle){const i=document.createElement("link");i.href=`${this.API_URL}/docs/unified.css`,i.rel="stylesheet",document.head.appendChild(i)}}},async mounted(){await this.setup()}}),f=(t,n)=>{const i=t.__vccOpts||t;for(const[o,a]of n)i[o]=a;return i},p={class:"unified"},m={key:0,class:"unified_menu"},u=["onClick"],_={class:"unified_vendors"},g=["href"],E=["src"],y={class:"unified_vendor_inner"},C={class:"unified_vendor_name"},A={key:0};function I(t,n,i,o,a,l){return e.openBlock(),e.createElementBlock("div",p,[!t.notabs&&t.CATEGORIES.length>0&&t.filter(t.INTEGRATIONS).length?(e.openBlock(),e.createElementBlock("div",m,[e.createElementVNode("button",{class:e.normalizeClass(["unified_button unified_button_all",t.selectedCategory?"":"active"]),onClick:n[0]||(n[0]=s=>t.unified_select_category())},"All",2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.CATEGORIES,s=>(e.openBlock(),e.createElementBlock("button",{key:s,class:e.normalizeClass(`unified_button unified_button_${s} ${t.selectedCategory===s?"active":""}`),onClick:r=>t.unified_select_category(s)},e.toDisplayString(t.CATEGORY_MAP[s]),11,u))),128))])):e.createCommentVNode("",!0),e.createElementVNode("div",_,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.filter(t.INTEGRATIONS),s=>(e.openBlock(),e.createElementBlock("a",{href:t.unified_get_auth_url(s),key:s.type,class:"unified_vendor"},[e.createElementVNode("img",{src:s.logo_url,class:"unified_image"},null,8,E),e.createElementVNode("div",y,[e.createElementVNode("div",C,e.toDisplayString(s.name),1),t.nocategories?e.createCommentVNode("",!0):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(s.categories.filter(r=>!t.CATEGORIES||t.CATEGORIES.indexOf(r)>-1).filter(r=>t.CATEGORY_MAP[r]),r=>(e.openBlock(),e.createElementBlock("div",{class:"unified_vendor_cats",key:r},[e.createElementVNode("span",null,e.toDisplayString(t.CATEGORY_MAP[r]),1)]))),128))])],8,g))),128)),t.filter(t.INTEGRATIONS).length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",A,"No integrations available"))])])}return f(h,[["render",I]])});
